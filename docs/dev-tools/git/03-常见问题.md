## pushä¹‹å‰æœªpull

æŠ¥é”™ä¿¡æ¯ï¼š

```bash
D:\code\test\test1>git push origin master
To http://192.168.1.189:8443/r/test.git
 ! [rejected]        master -> master (fetch first)
error: failed to push some refs to 'http://192.168.1.189:8443/r/test.git'
hint: Updates were rejected because the remote contains work that you do not
hint: have locally. This is usually caused by another repository pushing to
hint: the same ref. If you want to integrate the remote changes, use
hint: 'git pull' before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.
```

è§£å†³æ–¹æ³•ï¼š

```bash
# å…ˆæ‹‰å–
git pull
# åæ¨é€
git push origin master
```

**æ³¨æ„ï¼š** ä¸è¦å¼ºæ¨ï¼Œå¯èƒ½è¦†ç›–ä»–äººä¿®æ”¹ï¼Œä¸€èˆ¬ç”¨ä¸åˆ°ã€‚

```bash
git push -f origin master
```

## åˆå¹¶å†²çªï¼ˆä¿®æ”¹åŒä¸€æ–‡ä»¶ï¼‰
å½“ A å’Œ B åŒæ—¶ä¿®æ”¹äº†åŒä¸€æ–‡ä»¶çš„æ—¶å€™ï¼Œæœ¬åœ°æ–‡ä»¶å’Œè¿œç¨‹æ–‡ä»¶å‘ç”Ÿäº†å†²çªã€‚Git æ— æ³•è‡ªåŠ¨åˆå¹¶ï¼Œéœ€è¦ä½ æ‰‹åŠ¨è§£å†³å†²çªã€‚

ä¾‹å¦‚ï¼š

```bash
CONFLICT (content): Merge conflict in a.txt
Automatic merge failed; fix conflicts and then commit the result.
```

æ„æ€æ˜¯ï¼š

- Git åœ¨åˆå¹¶æ–‡ä»¶ `a.txt` æ—¶ï¼Œå‘ç°æœ¬åœ°å’Œè¿œç¨‹å¯¹åŒä¸€éƒ¨åˆ†ä»£ç è¿›è¡Œäº†ä¿®æ”¹ï¼›
- æ— æ³•åˆ¤æ–­ä»¥å“ªä¸€æ–¹ä¸ºå‡†ï¼Œè‡ªåŠ¨åˆå¹¶å¤±è´¥ï¼›
- éœ€è¦ä½ æ‰‹åŠ¨å¤„ç†è¿™ä¸ªå†²çªã€‚

è§£å†³æ–¹æ¡ˆï¼š

1. æ‰“å¼€å†²çªçš„ `a.txt` æ–‡ä»¶ï¼ŒæŸ¥çœ‹é‡Œé¢çš„å†…å®¹ï¼š

    ```
    <<<<<<< HEAD
    12       # è¿™é‡Œæ˜¯ A ä¿®æ”¹çš„
    =======
    1       # è¿™é‡Œæ˜¯ B ä¿®æ”¹çš„
    2
    >>>>>>> 6fe1e2d97eae79e0c5080ddea4bdef658841486d
    ```

2. æ‰‹åŠ¨ä¿®æ”¹å†…å®¹ï¼Œä¿ç•™éœ€è¦çš„éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼š

    ```
    12
    ```

3. æ·»åŠ ä¿®æ”¹åçš„æ–‡ä»¶ï¼š

    ```bash
    git add a.txt

    git commit -m "è§£å†³ a.txt å†²çª"

    git push origin master
    ```

## ä¿®æ”¹æ–‡ä»¶ä½† git status æ˜¾ç¤ºæœªä¿®æ”¹

å¯èƒ½çš„åŸå› ï¼š

- ä½ æ”¹çš„æ˜¯æ¢è¡Œç¬¦ï¼ˆLF/CRLFï¼‰ä½†å†…å®¹æ²¡å˜ï¼›
- ç¼–è¾‘å™¨ä¿å­˜è§„åˆ™è®¾ç½®å¯¼è‡´æœªæ£€æµ‹åˆ°çœŸå®ä¿®æ”¹ï¼›
- æ–‡ä»¶ç¼–ç é—®é¢˜æˆ–éšè—å­—ç¬¦ã€‚

è§£å†³æ–¹æ³•ï¼š

- ç”¨ `git diff` æ£€æŸ¥æ˜¯å¦çœŸçš„ä¿®æ”¹äº†ï¼›
- ä¹Ÿå¯ä»¥å°è¯•å…ˆæ”¹ç‚¹å†…å®¹ï¼Œå†æ¢å¤ï¼Œé‡æ–°ä¿å­˜ã€‚

## è¯¯åˆ æ–‡ä»¶
### æ–‡ä»¶è¯¯åˆ å¹¶å·² add
è¯¯åˆ äº†ä¸€ä¸ªæ–‡ä»¶ï¼ˆæ¯”å¦‚ `b.txt`ï¼‰ï¼Œç„¶åæ‰§è¡Œäº†ï¼š

```bash
git add a.txt
```

- è¿™æ—¶å€™ Git **æŠŠåˆ é™¤æ“ä½œåŠ å…¥æš‚å­˜åŒº**ï¼Œç­‰å¾… commitã€‚
- æ–‡ä»¶è¿˜æ²¡æœ‰è¢« commitï¼Œä½†å·²ç»ä»å·¥ä½œåŒºå’Œæš‚å­˜åŒºè®°å½•ä¸ºâ€œåˆ é™¤â€ã€‚



**æŸ¥çœ‹å“ªäº›æ–‡ä»¶è¢«è¯¯åˆ **

```bash
git status
```

ç¤ºä¾‹è¾“å‡º

```bash
Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
        new file:   a.txt

Changes not staged for commit:
  (use "git add/rm <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
        deleted:    a.txt
```



**æ¢å¤æ–‡ä»¶**

è¿™ä¼šæŠŠæ–‡ä»¶ä»æš‚å­˜åŒºç§»é™¤ï¼Œä½† **ä¸ä¼šæ¢å¤å·¥ä½œåŒºæ–‡ä»¶**ã€‚

```bash
git restore --staged a.txt
```

è¿™ä¼šæŠŠæ–‡ä»¶ä»æœ€åä¸€æ¬¡ commit çš„ç‰ˆæœ¬æ¢å¤åˆ°å·¥ä½œåŒºã€‚

```bash
git restore a.txt
```

æˆ–è€…å¯ä»¥å¾ªç¯æ¢å¤å¤šä¸ªè¯¯åˆ æ–‡ä»¶ï¼š

```
git restore --staged .
git restore .
```

> `git restore .` ä¼šæŠŠæ‰€æœ‰è¯¯åˆ ä¸”æœª commit çš„æ–‡ä»¶æ¢å¤ã€‚

### æ–‡ä»¶å·² commitï¼Œè¯¯åˆ æœª add

åœºæ™¯è¯´æ˜

- æ–‡ä»¶ **å·²ç»è¢« Git commit**ï¼ˆä¹Ÿå°±æ˜¯ä¹‹å‰å·²ç»è¢«ä¿å­˜åˆ°ç‰ˆæœ¬å†å²ä¸­ï¼‰
- ä½ åœ¨å·¥ä½œåŒº **è¯¯åˆ äº†è¯¥æ–‡ä»¶**
- **è¿˜æ²¡æœ‰æ‰§è¡Œ `git add`**

> è¿™æ—¶å€™ Git çŸ¥é“æ–‡ä»¶åŸæœ¬å­˜åœ¨ï¼Œä½†å·¥ä½œåŒºå·²ç»ç¼ºå¤±ã€‚



**æŸ¥çœ‹è¢«è¯¯åˆ çš„æ–‡ä»¶**

```bash
git status
```

ç¤ºä¾‹è¾“å‡ºï¼š

```bash
Changes not staged for commit:
  (use "git add/rm <file>..." to update what will be committed)
    deleted:    a.txt
```

> ğŸ”¹ `deleted: a.txt` å°±æ˜¯è¢«è¯¯åˆ çš„æ–‡ä»¶ã€‚

**æ¢å¤è¯¯åˆ æ–‡ä»¶ï¼ˆæœª addï¼‰**

```bash
git restore a.txt
```

> è¿™ä¼šä» **æœ€è¿‘ä¸€æ¬¡ commit** æ¢å¤æ–‡ä»¶åˆ°å·¥ä½œåŒºã€‚



**æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æ¢å¤æˆåŠŸ**

```
git status
```

- æ–‡ä»¶ä¼šå‡ºç°åœ¨å·¥ä½œåŒº
- `git status` ä¸å†æ˜¾ç¤º `deleted`

