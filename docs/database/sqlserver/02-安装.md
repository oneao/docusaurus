## Windows系统

### 安装

**1**、登陆微软中国官网：[Microsoft - Official Home Page](https://link.zhihu.com/?target=https%3A//www.microsoft.com/zh-cn/)；在搜索中输入 SQL Server 2008 并搜索。

![img](./assets/v2-7b64ed995472d681b150272e831bd06f_1440w.jpg)

下载链接：

[Download Microsoft® SQL Server® 2008 R2 SP2 - Express Edition from Official Microsoft Download Center](https://link.zhihu.com/?target=https%3A//www.microsoft.com/zh-CN/download/details.aspx%3Fid%3D30438)

**2**、下载

下载 64 位程序，如果系统是 32 位，就选 32 位的

![image-20250610210005234](./assets/image-20250610210005234.png)

这里只下载 **SQLEXPR_x64_CHS.exe** ，可视化工具选用 **Navicat**

**3**、安装

先安装SQL，再安装 SQL Management Studio

双击SQLEXPR_x64.CHS

![img](./assets/v2-a3b4eaa43750e31661f95cc1e25d7c55_1440w.jpg)

等待加载完毕

（这时会有一定的几率提醒你的电脑缺少[Microsoft .NET Framework 2.0](https://zhida.zhihu.com/search?content_id=102713512&content_type=Article&match_order=1&q=Microsoft+.NET+Framework+2.0&zd_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJ6aGlkYV9zZXJ2ZXIiLCJleHAiOjE3NDk3MzMwMzQsInEiOiJNaWNyb3NvZnQgLk5FVCBGcmFtZXdvcmsgMi4wIiwiemhpZGFfc291cmNlIjoiZW50aXR5IiwiY29udGVudF9pZCI6MTAyNzEzNTEyLCJjb250ZW50X3R5cGUiOiJBcnRpY2xlIiwibWF0Y2hfb3JkZXIiOjEsInpkX3Rva2VuIjpudWxsfQ.riy6QZKx3etA1Hd2g0oaCLoNl0G_pzuoq8tZqWZXfFo&zhida_source=entity) 或更高版本

根据他的提示进行安装就行）

![img](./assets/v2-21688a13be329ecf9efbdbc4040596a3_1440w.jpg)

如果没有，请忽略这一步。

当他顺利加载完毕之后，我们就可以看到下图所示的界面，**点击全新安装**

![img](./assets/v2-1688783d592ae41aa9fcf397867a2588_1440w.jpg)

![img](./assets/v2-4c7d6f2d930368d96ed646c8ef1e12c8_1440w.jpg)

接受并下一步

![img](./assets/v2-f3f22c97d8dfe77a9adb6811aa60dffe_1440w.jpg)

点击安装

一直下一步，保持默认设置到”实例配置“这一节，并选择”默认实例“，并点击下一步

![img](./assets/v2-34283637dc32b1e6623305be7194b3c6_1440w.jpg)

再一路下一步到”数据库引擎配置这一节“

![img](./assets/v2-9c9150dd6b42728ba18d001e08870058_1440w.jpg)

如果没有用户的话就点击”添加当前用户”

![img](./assets/v2-994ee12358e16a3c839030de71bb5fb0_1440w.jpg)

错误报告可选可不选

一直下一步直到安装完成

![img](./assets/v2-3c4a8588b5a2faca27dec12af7c99c4b_1440w.jpg)

到此为止，我们的安装过程已经进行完成了。 SQL Management Studio 可按照需求安装

### 配置

#### 服务

Windows 系统：`win` + `r` 输入 `services.msc` ，打开后找到 SqlServer 相关的，并将服务修改为自动，并且需要 首次 手动启动

![image-20250610210638276](./assets/image-20250610210638276.png)

![image-20250610210703831](./assets/image-20250610210703831.png)

#### 协议

`win` 键启动搜索，搜索 SQL Server 配置管理器

![image-20250610210833638](./assets/image-20250610210833638.png)

点击 SQL Server 配置管理器，确保该三个协议已启动，未启动则启动![image-20250610210952597](./assets/image-20250610210952597.png)

#### 端口

右键 TCP/IP

![image-20250610211035375](./assets/image-20250610211035375.png)

点击属性，修改 TCP 端口 为 1433

![image-20250610211139630](./assets/image-20250610211139630.png)

点击 应用 和 确认后，**重启电脑才能生效**

### 校验

**校验是否安装正确**

打开 **命令提示符**（Win + R，输入 `cmd`，回车）

Windows 上默认安装 SQL Server 的时候，通常会带有 `sqlcmd` 工具（如果没有，可能需要单独安装“命令行工具”）。

1. 打开 **命令提示符**（Win + R，输入 `cmd`，回车）
2. 输入以下命令连接本机默认实例：

```bash
sqlcmd -S localhost -E
```

参数说明：

- `-S localhost` ：连接本机默认实例
- `-E` ：使用 Windows 身份验证

3. 如果成功连接，你会看到类似如下提示：

```shell
1>
```

4. 在提示符后输入测试命令：

```sql
SELECT @@VERSION;
GO
```

然后按回车，输出当前 SQL Server 版本信息，证明连接成功。

5. 输入

```
QUIT
```

退出命令行界面。

### 启用混合模式认证（SQL Server 和 Windows 认证）

默认情况下，SQL Server 只开启 Windows 认证（Windows Authentication Mode），你需要手动开启“混合模式”（Mixed Mode Authentication），才能使用 SQL Server 账号（如 `sa`）登录。

1. 打开命令提示符，连接到 SQL Server：

```bash
sqlcmd -S localhost -E
```

2. 执行以下命令开启混合模式：

```sql
EXEC xp_instance_regwrite
    N'HKEY_LOCAL_MACHINE',
    N'Software\Microsoft\MSSQLServer\MSSQLServer',
    N'LoginMode',
    REG_DWORD,
    2
GO
```

> 说明：`LoginMode` 设置为 `2` 表示混合模式，`1` 表示只 Windows 认证。

3. 重启 SQL Server 服务，使设置生效：

- 打开服务管理器，找到 `SQL Server (实例名)` 服务，点击“重启”或先停止再启动。

4. 启用 `sa` 账号并设置密码（默认可能禁用）

继续用 `sqlcmd` 执行：

```
ALTER LOGIN sa ENABLE;
GO
ALTER LOGIN sa WITH PASSWORD = '你的强密码';
GO
```

- **密码建议**：至少 8 位，包含大小写字母、数字和特殊符号。

5. 测试账号密码登录

- 使用 `sqlcmd`：

```bash
sqlcmd -S localhost -U sa -P 你的密码
```

- 连接成功即开启账号密码登录。

6. 额外说明

- 修改注册表和重启服务后才生效。
- 也可以用 PowerShell 或其他管理工具执行上述 SQL 命令。
- 强烈建议启用强密码，防止安全风险。
- 生产环境尽量避免启用 `sa`，建议创建新的 SQL 登录账号。
